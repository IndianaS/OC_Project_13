{% extends "base.html" %}

{% block content %}


<div class="container">
    <br>
    <div class="text-center" id="friends-list">
        <h3 class="textcustom text-muted">Recherche un amis via sont pseudo .</h3>
        <div class="container">
            <form action="{% url 'users:add_friend' %}" method="POST">
                {% csrf_token %}
                <input type="search" id="collection_user" class="collection_user" name="username" placeholder="Entre un pseudo">
                <br>
                <br>
                <button class="btn btn-primary text-uppercase js-scroll-trigger textcolorcustom">Rechercher</button>
            </form>
        </div>
    </div>
    <br>
    <div class="container" style="border-radius: 10px; background-color: gainsboro;">
        <div>
            <br>
            <h2>Liste d'amis :</h2>
        </div>
        <hr max-width="700px" color="#29A4FE">
        <br>
        <div class="row">
            {% for friend in friends %}
            <div class="col-lg-6 col-sm-6 col-xs-6 text-center">
                <h3 class="textcustom">{{ friend.username }}</h3>
            </div>
            <div class="col-lg-offset-2 col-sm-offset-2 col-xs-6">
                <form action="{% url 'users:remove_friend' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" id="other_user_id" name="other_user_id" value="{{ friend.id }}">
                    <button type="submit"><i class="fas fa-trash"></i></button>
                </form>
            </div>
            <hr width="700px" color= "#B7B2B2">
            {% endfor %}
        </div>
    </div>
</div>
<br>
<div class="container" style="border-radius: 10px;">
    <div>
        <br>
        <h2>Demandes d'amis :</h2>
    </div>
    <hr max-width="700px" color="#29A4FE">
    <br>
    <div class="row">
        {% for friend in friend_request_pending %}
        <div class="col-lg-6 col-sm-6 col-xs-6 text-center">
            <h3 class="textcustom">{{ friend }}</h3>
        </div>
        <div class="col-lg-offset-2 col-sm-offset-2 col-xs-6">
            <form name="friend_request" action="{% url 'users:accept_request' %}" method="post">
                {% csrf_token %}
                <input type="hidden" id="other_user_id" name="other_user_id" value="{{ friend.id }}">
                <input class="btn btn-primary text-uppercase js-scroll-trigger textcolorcustom" type="submit" name="accept" id="accept" value="Valider" onclick="acceptFunction()">
                <input class="btn btn-primary text-uppercase js-scroll-trigger textcolorcustom" style="background-color: #DE2F2F;" type="submit" name="reject" id="reject" value="Refuser" onclick="rejectFunction()">
                <input type="hidden" id="user_choice" name="user_choice" value="">
            </form>
            <script>
                function acceptFunction(){
                    document.friend_request.user_choice.value  = "Accepted";
                }
                function rejectFunction(){
                    document.friend_request.user_choice.value  = "Rejected";
                }
            </script>
        </div>
        <hr width="700px" color= "#B7B2B2">
        {% endfor %}

    </div>
</div>

{% endblock content %}
